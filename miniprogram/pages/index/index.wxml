<!--pages/index/index.wxml-->
<view class="container">
  <!-- å¤´éƒ¨ç”¨æˆ·ä¿¡æ¯ -->
  <view class="user-header">
    <view class="user-card">
      <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}"></image>
      <view class="user-greeting">
        <view class="greeting">Hi, {{userInfo.nickName || 'å­¦ä¹ è€…'}}</view>
        <view class="sub-greeting">ä»Šå¤©ä¹Ÿè¦è¿›æ­¥ä¸€ç‚¹ç‚¹</view>
      </view>
      <view class="continuous-days">
        <view class="days-badge">ğŸ”¥ {{overallStats.continuousDays}}å¤©</view>
      </view>
    </view>
  </view>
  
  <!-- ä»Šæ—¥å­¦ä¹  -->
  <view class="stats-section">
    <view class="section-title">ğŸ“Š ä»Šæ—¥å­¦ä¹ </view>
    <view class="stats-grid">
      <view class="stat-item">
        <view class="stat-value">{{todayStats.learnedWords}}</view>
        <view class="stat-label">å­¦ä¹ å•è¯</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{todayStats.studyTime}}</view>
        <view class="stat-label">å­¦ä¹ æ—¶é•¿</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{todayStats.accuracy}}%</view>
        <view class="stat-label">æ­£ç¡®ç‡</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{overallStats.totalGroups}}</view>
        <view class="stat-label">åŠ å…¥ç¾¤ç»„</view>
      </view>
    </view>
  </view>
  
  <!-- æ€»ä½“ç»Ÿè®¡ -->
  <view class="stats-section">
    <view class="section-title">â­ æ€»ä½“ç»Ÿè®¡</view>
    <view class="stats-grid">
      <view class="stat-item">
        <view class="stat-value">{{overallStats.totalWords}}</view>
        <view class="stat-label">ç´¯è®¡å•è¯</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{overallStats.continuousDays}}</view>
        <view class="stat-label">è¿ç»­å¤©æ•°</view>
      </view>
    </view>
  </view>
  
  <!-- åŠŸèƒ½å…¥å£ -->
  <view class="actions-grid">
    <view class="action-btn primary" bindtap="startLearning">
      <view class="action-icon">ğŸš€</view>
      <view class="action-text">å¼€å§‹å­¦ä¹ </view>
    </view>
    <view class="action-btn" bindtap="startReview">
      <view class="action-icon">ğŸ“</view>
      <view class="action-text">å¤ä¹ </view>
    </view>
    <view class="action-btn" bindtap="goToGroups">
      <view class="action-icon">ğŸ‘¥</view>
      <view class="action-text">æˆ‘çš„ç¾¤ç»„</view>
    </view>
    <view class="action-btn" bindtap="viewStats">
      <view class="action-icon">ğŸ“ˆ</view>
      <view class="action-text">å­¦ä¹ æŠ¥å‘Š</view>
    </view>
  </view>

  <!-- æœ€è¿‘ç¾¤ç»„ -->
  <view class="stats-section" wx:if="{{recentGroups.length > 0}}">
    <view class="section-title">ğŸ‘¥ æœ€è¿‘ç¾¤ç»„</view>
    <view class="groups-list">
      <view 
        class="group-item" 
        wx:for="{{recentGroups}}" 
        wx:key="_id"
        bindtap="onGroupTap"
        data-id="{{item._id}}"
        data-name="{{item.name}}"
      >
        <view class="group-avatar">{{item.name.charAt(0)}}</view>
        <view class="group-info">
          <view class="group-name">{{item.name}}</view>
          <view class="group-members">{{item.memberCount}}äºº Â· æ’å#{{item.myRank}}</view>
        </view>
        <view class="group-arrow">â€º</view>
      </view>
    </view>
  </view>
</view>